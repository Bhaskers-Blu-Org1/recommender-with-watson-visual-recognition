{"version":3,"sources":["webpack:///./src/app/recommendation/recommendation.module.ts","webpack:///./src/app/recommendation/recommendation.page.html","webpack:///./src/app/recommendation/recommendation.page.scss","webpack:///./src/app/recommendation/recommendation.page.ts"],"names":[],"mappings":"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","file":"recommendation-recommendation-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RecommendationPage } from './recommendation.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RecommendationPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RecommendationPage]\n})\nexport class RecommendationPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\n        </ion-buttons>\\n    <ion-title>\\n      Recommended Products\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"openCart()\\\">\\n        <ion-badge color=\\\"dark\\\" *ngIf=\\\"cart.length > 0\\\">{{cart.length}}</ion-badge>\\n        <ion-icon name=\\\"cart\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <div *ngFor=\\\"let cat of items\\\" class=\\\"category-block\\\">\\n    \\n    <ion-row no-padding class=\\\"category-banner\\\">\\n      <ion-col text-left button tappable (click)=\\\"cat.expanded = !cat.expanded\\\" align-self-center>\\n        {{cat.category}} \\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-slides [options]=\\\"sliderConfig\\\">\\n      <ion-slide *ngFor=\\\"let product of cat.products\\\">\\n        <div *ngIf=\\\"!cat.expanded\\\">\\n        <ion-card>\\n          <ion-card-header>\\n            <ion-card-title>\\n              {{product.name}} - {{product.price | currency:'INR':'symbol'}}\\n            </ion-card-title>\\n            <ion-card-content>\\n              <img src=\\\"{{objectStorageAccess.baseUrl}}{{product.img}}\\\" height=\\\"256\\\" width=\\\"256\\\">\\n              <br/>\\n              <p>Dimensions: {{product.height}} cm x {{product.width}} cm</p>\\n              <ion-button expand=\\\"block\\\" (click)=\\\"addToCart(product)\\\" color=\\\"success\\\">Add to Cart</ion-button>\\n            </ion-card-content>\\n          </ion-card-header>\\n        </ion-card>\\n      </div>\\n      </ion-slide>\\n    </ion-slides>\\n\\n  </div>\\n</ion-content>\\n\\n\"","module.exports = \".myimg {\\n  float: left;\\n  height: 200px;\\n  margin-right: 30px;\\n  width: 200px; }\\n\\nion-badge {\\n  color: #fff;\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n  border-radius: 100%; }\\n\\n.category-block {\\n  margin-bottom: 4px; }\\n\\n.category-banner {\\n  border-left: 8px solid var(--ion-color-success);\\n  background: var(--ion-color-light);\\n  height: 40px;\\n  padding: 10px;\\n  font-weight: 500; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYW5vamphaGdpcmRhci9EZXNrdG9wL0ZpbmFsIEdpdCBVcGxvYWQvdmlzdWFsLXJlY29nbml0aW9uL3Zpc3VhbC1yZWNvZ25pdGlvbi9KZXdlbGxlcnlTdG9yZUFwcC9zcmMvYXBwL3JlY29tbWVuZGF0aW9uL3JlY29tbWVuZGF0aW9uLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQVc7RUFDYixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLFlBQVksRUFBQTs7QUFFZDtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLFVBQVU7RUFDVixtQkFBbUIsRUFBQTs7QUFHckI7RUFDRSxrQkFBa0IsRUFBQTs7QUFHcEI7RUFDRSwrQ0FBK0M7RUFDL0Msa0NBQWtDO0VBQ2xDLFlBQVk7RUFDWixhQUFhO0VBQ2IsZ0JBQWdCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9yZWNvbW1lbmRhdGlvbi9yZWNvbW1lbmRhdGlvbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubXlpbWd7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gIGhlaWdodDogMjAwcHg7XG4gIG1hcmdpbi1yaWdodDogMzBweDtcbiAgd2lkdGg6IDIwMHB4O1xufVxuaW9uLWJhZGdlIHtcbiAgY29sb3I6ICNmZmY7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwcHg7XG4gIHJpZ2h0OiAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG59XG5cbi5jYXRlZ29yeS1ibG9jayB7XG4gIG1hcmdpbi1ib3R0b206IDRweDtcbn1cblxuLmNhdGVnb3J5LWJhbm5lciB7XG4gIGJvcmRlci1sZWZ0OiA4cHggc29saWQgdmFyKC0taW9uLWNvbG9yLXN1Y2Nlc3MpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xuICBoZWlnaHQ6IDQwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { NavController, LoadingController } from '@ionic/angular';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { ToastController } from '@ionic/angular';\nimport { ProviderService } from '../provider.service';\nimport { CartService } from '../cart.service';\n\n@Component({\n  selector: 'app-recommendation',\n  templateUrl: './recommendation.page.html',\n  styleUrls: ['./recommendation.page.scss'],\n})\nexport class RecommendationPage implements OnInit {\n\n  virtualMirrorAPI:string = null;\n  virtualMirrorAccess:any;\n  recommendationEngineAPI:string;\n  recommendationEngineAccess: any;\n  objectStorageAccess: any;\n  receivedAge:string = null;\n  receivedName:string = null;\n  receivedGender:string = null;\n  url:string = null;\n  data: Observable<any>;\n  items:any = [];\n  api;\n  cart = [];\n\n  sliderConfig = {\n    spaceBetween: 10,\n    centeredSlides: true,\n    slidesPerView: 1.6\n  }\n\n  constructor(private nav: NavController, private http: HttpClient, private activatedRoute: ActivatedRoute, \n    public loadingController:LoadingController, public toastController: ToastController, \n    public loadingCtrl: LoadingController, private cartService: CartService,\n    public providerService: ProviderService) { \n\n      console.log('--> Recommendation page constructor() called');\n    \n      // Get the name, age & gender from home page\n\n      this.receivedAge = this.activatedRoute.snapshot.paramMap.get('age');\n      this.receivedName = this.activatedRoute.snapshot.paramMap.get('name');\n      this.receivedGender = this.activatedRoute.snapshot.paramMap.get('gender');\n  }\n\n  //Toast setup\n\n  async presentToastWithOptions(msg:string) {\n    const toast = await this.toastController.create({\n      message: msg,\n      showCloseButton: false,\n      position: 'bottom',\n      duration: 1000\n    });\n    toast.present();\n  }\n\n  // Make call to recommendation engine api and get recommendations\n\n  async RecommendationEngine(){\n    \n    const loading = await this.loadingController.create({\n      message: 'Getting Recommendations please wait...',\n    });\n    loading.present().then( () => {\n      console.log('--> Calling Recommendation Engine API');\n      this.providerService.getRecommendationEngineAccess().then(recommendationEngineAccess => {\n        this.recommendationEngineAccess = recommendationEngineAccess;\n        console.log('--> Received Object: '+this.recommendationEngineAccess);\n        this.recommendationEngineAPI = this.recommendationEngineAccess.RecommendationEngineApi;\n        \n        this.url = this.recommendationEngineAPI+'?age='+this.receivedAge+'&name='+this.receivedName+'&gender='+this.receivedGender;\n        this.url.toString();\n  \n        this.data = this.http.get(this.url);\n        this.data.subscribe(data => {\n      \n        data.sort(GetSortOrder(\"count\")); \n      \n        //Sort based on highest number of count of the product \n      \n        function GetSortOrder(prop) {  \n      \n          return function(a, b) {  \n            if (a[prop] < b[prop]) {  \n              return 1;  \n            } else if (a[prop] > b[prop]) {  \n              return -1;  \n            }  \n            return 0;  \n          }   \n        }  \n        this.items = data;\n        this.cart = this.cartService.getCart();\n        this.presentToastWithOptions(\"Tip: Click on top right icon to view cart.\");\n        loading.dismiss();\n      });\n    });\n    });\n  } \n\n  ngOnInit() {\n    this.loadCloudObjectStorageData();\n    this.RecommendationEngine();\n  }\n\n  // Connect to Cloud Object Storage through Mobile Foundation\n\n  async loadCloudObjectStorageData() {\n    const loading = await this.loadingController.create({\n      message: 'Authorizing Cloud Object Storage...',\n    });\n    loading.present().then(() => {\n      console.log('--> Cloud Object Storage authorization method called');\n        this.providerService.getObjectStorageAccess().then((objectStorageAccess) => {\n          this.objectStorageAccess = objectStorageAccess;\n          console.log('--> Received Object: '+this.objectStorageAccess);\n          console.log('--> Cloud Object Storage authorization successful');\n          this.presentToastWithOptions(\"Cloud Object Storage authorization successful.\"); \n          loading.dismiss();\n        }).catch((err) => {\n          this.presentToastWithOptions(\"MobileFirst Foundation Adapter Failed to authorize COS.\");\n        });  \n      });\n  }\n\n  addToCart(product){\n    this.cartService.addProduct(product);\n  }\n\n  // Redirect to try virtually page\n  \n  openCart() {\n    this.presentToastWithOptions(\"Thank you for Checking out!\");\n    this.nav.navigateForward(`/checkout`);\n  }\n\n}\n"],"sourceRoot":""}